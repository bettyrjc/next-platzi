{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport 'isomorphic-fetch';\nimport Link from 'next/link';\nimport Error from './_error';\nimport Layout from '../components/layout';\nimport Podcasts from '../components/podcastListWithClick';\nimport PodcastsPlayer from '../components/PodcastPlayer';\n\nvar channel =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(channel, _Component);\n\n  function channel(props) {\n    var _this;\n\n    _classCallCheck(this, channel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(channel).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"openPodcast\", function (event, podcast) {\n      event.preventDefault();\n\n      _this.setState({\n        openPodcast: podcast\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClosePodcast\", function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        openPodcast: null\n      });\n    });\n\n    _this.state = {\n      openPodcast: null\n    };\n    return _this;\n  }\n\n  _createClass(channel, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          channel = _this$props.channel,\n          audioClips = _this$props.audioClips,\n          series = _this$props.series,\n          statusCode = _this$props.statusCode;\n      var openPodcast = this.state.openPodcast;\n\n      if (statusCode !== 200) {\n        return __jsx(Error, {\n          statusCode: statusCode\n        });\n      }\n\n      return __jsx(Layout, {\n        title: channel.title\n      }, __jsx(\"div\", {\n        style: {\n          backgroundImage: \"url(\".concat(channel.urls.banner_image.original, \")\")\n        },\n        className: \"jsx-2500312497\" + \" \" + \"banner\"\n      }), openPodcast && __jsx(\"div\", {\n        className: \"jsx-2500312497\" + \" \" + \"modal\"\n      }, __jsx(PodcastsPlayer, {\n        clip: openPodcast,\n        onClose: this.onClosePodcast\n      })), __jsx(\"h1\", {\n        className: \"jsx-2500312497\"\n      }, channel.title), series.length > 0 && __jsx(\"div\", {\n        className: \"jsx-2500312497\"\n      }, __jsx(\"h2\", {\n        className: \"jsx-2500312497\"\n      }, \"Series\"), __jsx(\"div\", {\n        className: \"jsx-2500312497\" + \" \" + \"channels\"\n      }, series.map(function (serie) {\n        return __jsx(Link, {\n          href: \"/channel?id=\".concat(serie.id),\n          prefetch: true\n        }, __jsx(\"a\", {\n          className: \"jsx-2500312497\" + \" \" + \"channel\"\n        }, __jsx(\"img\", {\n          src: serie.urls.logo_image.original,\n          alt: \"\",\n          className: \"jsx-2500312497\"\n        }), __jsx(\"h2\", {\n          className: \"jsx-2500312497\"\n        }, serie.title)));\n      }))), __jsx(\"h2\", {\n        className: \"jsx-2500312497\"\n      }, \"Ultimos Podcasts\"), __jsx(Podcasts, {\n        podcasts: audioClips,\n        onClickPodcast: this.openPodcast\n      }), __jsx(_JSXStyle, {\n        id: \"2500312497\"\n      }, \".modal.jsx-2500312497{position:fixed;top:0;left:0;right:0;bottom:0;z-index:9999;}.channels.jsx-2500312497{display:grid;grid-gap:15px;padding:15px;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));}h1.jsx-2500312497{font-weight:600px;padding:15px;}a.channel.jsx-2500312497{display:block;margin-bottom:0.5em;color:#333;-webkit-text-decoration:none;text-decoration:none;}.channel.jsx-2500312497 img.jsx-2500312497{border-radius:3px;box-shadow:0px 2px 6px rgba(0,0,0,0.15);width:100%;}h2.jsx-2500312497{padding:5px;font-size:0.9em;font-weight:600;margin:0;text-align:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9tZWRpYS9iZXR0eS83NDBlYjExYi1jNjc3LTQzY2YtODRmMS0wNDUzZmFhMzRlNTEvYmV0dHkvRVNUVURJT1MvUkVBQ1QvTkVYVC1KUy9wbGF0emktbmV4dGpzLTEuUm91dGVyL3BhZ2VzL2NoYW5uZWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBK0ZTLEFBRzBCLEFBUUEsQUFNSSxBQUlILEFBTUksQUFLTixZQUNJLENBckJGLENBVU0sQ0FsQmpCLEdBY1MsQUFVNEIsR0F2QnBDLE1BUVMsQ0FQUixBQTRCVyxHQWZsQixHQUlhLEVBaEJMLElBT3NELElBcUJuRCxDQTNCQyxBQWdCVyxRQVlILEtBM0J0QixBQW9CZSxXQUNiLEVBT0Esd0JBWkEsR0FWQSIsImZpbGUiOiIvbWVkaWEvYmV0dHkvNzQwZWIxMWItYzY3Ny00M2NmLTg0ZjEtMDQ1M2ZhYTM0ZTUxL2JldHR5L0VTVFVESU9TL1JFQUNUL05FWFQtSlMvcGxhdHppLW5leHRqcy0xLlJvdXRlci9wYWdlcy9jaGFubmVsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0ICdpc29tb3JwaGljLWZldGNoJ1xuaW1wb3J0IExpbmsgZnJvbSAnbmV4dC9saW5rJ1xuaW1wb3J0IEVycm9yIGZyb20gJy4vX2Vycm9yJ1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvbGF5b3V0JztcbmltcG9ydCBQb2RjYXN0cyBmcm9tICcuLi9jb21wb25lbnRzL3BvZGNhc3RMaXN0V2l0aENsaWNrJ1xuaW1wb3J0IFBvZGNhc3RzUGxheWVyIGZyb20gJy4uL2NvbXBvbmVudHMvUG9kY2FzdFBsYXllcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgY2hhbm5lbCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7b3BlblBvZGNhc3Q6bnVsbH07XG4gIH1cbiAgc3RhdGljIGFzeW5jIGdldEluaXRpYWxQcm9wcyh7cXVlcnksIHJlc30pIHtcbiAgICBsZXQgaWRDaGFubmVsID0gcXVlcnkuaWRcbiAgICB0cnl7XG4gICAgICBsZXQgW3JlcUNoYW5uZWwsIHJlcVNlcmllcywgcmVxQXVkaW9zXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZmV0Y2goYGh0dHBzOi8vYXBpLmF1ZGlvYm9vbS5jb20vY2hhbm5lbHMvJHtpZENoYW5uZWx9YCksXG4gICAgICAgIGZldGNoKGBodHRwczovL2FwaS5hdWRpb2Jvb20uY29tL2NoYW5uZWxzLyR7aWRDaGFubmVsfS9jaGlsZF9jaGFubmVsc2ApLFxuICAgICAgICBmZXRjaChgaHR0cHM6Ly9hcGkuYXVkaW9ib29tLmNvbS9jaGFubmVscy8ke2lkQ2hhbm5lbH0vYXVkaW9fY2xpcHNgKVxuICAgICAgXSlcbiAgICAgIGlmKCByZXFDaGFubmVsLnN0YXR1cyA+PSA0MDAgKSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gcmVxQ2hhbm5lbC5zdGF0dXNcbiAgICAgICAgcmV0dXJuIHsgY2hhbm5lbDogbnVsbCwgYXVkaW9DbGlwczogbnVsbCwgc2VyaWVzOiBudWxsLCBzdGF0dXNDb2RlOiByZXFDaGFubmVsLnN0YXR1cyB9XG4gICAgICB9XG4gICAgICBsZXQgZGF0YUNoYW5uZWwgPSBhd2FpdCByZXFDaGFubmVsLmpzb24oKVxuICAgICAgbGV0IGNoYW5uZWwgPSBkYXRhQ2hhbm5lbC5ib2R5LmNoYW5uZWw7XG5cbiAgICAgIGxldCBkYXRhQXVkaW9zID0gYXdhaXQgcmVxQXVkaW9zLmpzb24oKVxuICAgICAgbGV0IGF1ZGlvQ2xpcHMgPSBkYXRhQXVkaW9zLmJvZHkuYXVkaW9fY2xpcHNcblxuICAgICAgbGV0IGRhdGFTZXJpZXMgPSBhd2FpdCByZXFTZXJpZXMuanNvbigpXG4gICAgICBsZXQgc2VyaWVzID0gZGF0YVNlcmllcy5ib2R5LmNoYW5uZWxzXG4gICAgICByZXR1cm4geyBjaGFubmVsLCBhdWRpb0NsaXBzLCBzZXJpZXMsIHN0YXR1c0NvZGU6IDIwMCB9XG4gICAgfVxuICAgIGNhdGNoKGUpIHtcbiAgICAgIHJldHVybiB7IGNoYW5uZWw6IG51bGwsIGF1ZGlvQ2xpcHM6IG51bGwsIHNlcmllczogbnVsbCwgc3RhdHVzQ29kZTogNTAzIH1cbiAgICB9XG4gfVxuICBcbiBvcGVuUG9kY2FzdD0gKGV2ZW50LCBwb2RjYXN0KT0+e1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB0aGlzLnNldFN0YXRlKHtcbiAgICBvcGVuUG9kY2FzdDogcG9kY2FzdFxuICB9KVxuIH1cbiBvbkNsb3NlUG9kY2FzdCA9IChldmVudCkgPT57XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHRoaXMuc2V0U3RhdGUoe1xuICAgIG9wZW5Qb2RjYXN0OiBudWxsXG4gIH0pXG4gfVxuICByZW5kZXIoKSB7ICAgIFxuICAgIGNvbnN0ICB7Y2hhbm5lbCwgYXVkaW9DbGlwcywgc2VyaWVzLCBzdGF0dXNDb2RlfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7b3BlblBvZGNhc3R9ID0gdGhpcy5zdGF0ZTtcbiAgICBpZiggc3RhdHVzQ29kZSAhPT0gMjAwICkge1xuICAgICAgcmV0dXJuIDxFcnJvciBzdGF0dXNDb2RlPXsgc3RhdHVzQ29kZSB9IC8+XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxMYXlvdXQgIHRpdGxlPXtjaGFubmVsLnRpdGxlfT5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmFubmVyXCIgc3R5bGU9e3sgYmFja2dyb3VuZEltYWdlOiBgdXJsKCR7Y2hhbm5lbC51cmxzLmJhbm5lcl9pbWFnZS5vcmlnaW5hbH0pYCB9fSAvPlxuICAgICAgIFxuICAgICAgICB7b3BlblBvZGNhc3QgJiYgPGRpdiAgY2xhc3NOYW1lPVwibW9kYWxcIj5cbiAgICAgICAgICAgPFBvZGNhc3RzUGxheWVyIFxuICAgICAgICAgICAgY2xpcD17b3BlblBvZGNhc3R9XG4gICAgICAgICAgICBvbkNsb3NlPSB7dGhpcy5vbkNsb3NlUG9kY2FzdH1cbiAgICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+fVxuICAgICAgPGgxPnsgY2hhbm5lbC50aXRsZSB9PC9oMT5cblxuICAgICAgeyBzZXJpZXMubGVuZ3RoID4gMCAmJlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxoMj5TZXJpZXM8L2gyPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hhbm5lbHNcIj5cbiAgICAgICAgICAgIHsgc2VyaWVzLm1hcCgoc2VyaWUpID0+IChcbiAgICAgICAgICAgICAgPExpbmsgaHJlZj17YC9jaGFubmVsP2lkPSR7IHNlcmllLmlkIH1gfSBwcmVmZXRjaD5cbiAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJjaGFubmVsXCI+XG4gICAgICAgICAgICAgICAgICA8aW1nIHNyYz17IHNlcmllLnVybHMubG9nb19pbWFnZS5vcmlnaW5hbCB9IGFsdD1cIlwiLz5cbiAgICAgICAgICAgICAgICAgIDxoMj57IHNlcmllLnRpdGxlIH08L2gyPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgfVxuXG4gICAgICA8aDI+VWx0aW1vcyBQb2RjYXN0czwvaDI+XG4gICAgICA8UG9kY2FzdHNcbiAgICAgICAgcG9kY2FzdHM9e2F1ZGlvQ2xpcHN9XG4gICAgICAgIG9uQ2xpY2tQb2RjYXN0PXt0aGlzLm9wZW5Qb2RjYXN0fVxuICAgICAgLz5cbiAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAge2BcbiAgICAgICAgLm1vZGFse1xuICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICB0b3A6MDtcbiAgICAgICAgICBsZWZ0OjA7XG4gICAgICAgICAgcmlnaHQ6MDtcbiAgICAgICAgICBib3R0b206MDtcbiAgICAgICAgICB6LWluZGV4Ojk5OTk7XG4gICAgICAgIH1cbiAgICAgICAgICAuY2hhbm5lbHMge1xuICAgICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICAgIGdyaWQtZ2FwOiAxNXB4O1xuICAgICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE2MHB4LCAxZnIpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaDF7XG4gICAgICAgICAgICBmb250LXdlaWdodDo2MDBweDtcbiAgICAgICAgICAgIHBhZGRpbmc6MTVweDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYS5jaGFubmVsIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41ZW07XG4gICAgICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLmNoYW5uZWwgaW1nIHtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAycHggNnB4IHJnYmEoMCwwLDAsMC4xNSk7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaDIge1xuICAgICAgICAgICAgcGFkZGluZzogNXB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgfVxuICAgICAgICBgfVxuICAgICAgPC9zdHlsZT5cbiAgICAgIDwvTGF5b3V0PlxuICAgIClcbiAgfVxufVxuIl19 */\\n/*@ sourceURL=/media/betty/740eb11b-c677-43cf-84f1-0453faa34e51/betty/ESTUDIOS/REACT/NEXT-JS/platzi-nextjs-1.Router/pages/channel.js */\"));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var query, res, idChannel, _ref2, _ref3, reqChannel, reqSeries, reqAudios, dataChannel, _channel, dataAudios, audioClips, dataSeries, series;\n\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              query = _ref.query, res = _ref.res;\n              idChannel = query.id;\n              _context.prev = 2;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(_Promise.all([fetch(\"https://api.audioboom.com/channels/\".concat(idChannel)), fetch(\"https://api.audioboom.com/channels/\".concat(idChannel, \"/child_channels\")), fetch(\"https://api.audioboom.com/channels/\".concat(idChannel, \"/audio_clips\"))]));\n\n            case 5:\n              _ref2 = _context.sent;\n              _ref3 = _slicedToArray(_ref2, 3);\n              reqChannel = _ref3[0];\n              reqSeries = _ref3[1];\n              reqAudios = _ref3[2];\n\n              if (!(reqChannel.status >= 400)) {\n                _context.next = 13;\n                break;\n              }\n\n              res.statusCode = reqChannel.status;\n              return _context.abrupt(\"return\", {\n                channel: null,\n                audioClips: null,\n                series: null,\n                statusCode: reqChannel.status\n              });\n\n            case 13:\n              _context.next = 15;\n              return _regeneratorRuntime.awrap(reqChannel.json());\n\n            case 15:\n              dataChannel = _context.sent;\n              _channel = dataChannel.body.channel;\n              _context.next = 19;\n              return _regeneratorRuntime.awrap(reqAudios.json());\n\n            case 19:\n              dataAudios = _context.sent;\n              audioClips = dataAudios.body.audio_clips;\n              _context.next = 23;\n              return _regeneratorRuntime.awrap(reqSeries.json());\n\n            case 23:\n              dataSeries = _context.sent;\n              series = dataSeries.body.channels;\n              return _context.abrupt(\"return\", {\n                channel: _channel,\n                audioClips: audioClips,\n                series: series,\n                statusCode: 200\n              });\n\n            case 28:\n              _context.prev = 28;\n              _context.t0 = _context[\"catch\"](2);\n              return _context.abrupt(\"return\", {\n                channel: null,\n                audioClips: null,\n                series: null,\n                statusCode: 503\n              });\n\n            case 31:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[2, 28]]);\n    }\n  }]);\n\n  return channel;\n}(Component);\n\nexport { channel as default };","map":{"version":3,"sources":["/media/betty/740eb11b-c677-43cf-84f1-0453faa34e51/betty/ESTUDIOS/REACT/NEXT-JS/platzi-nextjs-1.Router/pages/channel.js"],"names":["React","Component","Link","Error","Layout","Podcasts","PodcastsPlayer","channel","props","event","podcast","preventDefault","setState","openPodcast","state","audioClips","series","statusCode","title","backgroundImage","urls","banner_image","original","onClosePodcast","length","map","serie","id","logo_image","query","res","idChannel","all","fetch","reqChannel","reqSeries","reqAudios","status","json","dataChannel","body","dataAudios","audio_clips","dataSeries","channels"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport 'isomorphic-fetch'\nimport Link from 'next/link'\nimport Error from './_error'\n\nimport Layout from '../components/layout';\nimport Podcasts from '../components/podcastListWithClick'\nimport PodcastsPlayer from '../components/PodcastPlayer'\n\nexport default class channel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {openPodcast:null};\n  }\n  static async getInitialProps({query, res}) {\n    let idChannel = query.id\n    try{\n      let [reqChannel, reqSeries, reqAudios] = await Promise.all([\n        fetch(`https://api.audioboom.com/channels/${idChannel}`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/child_channels`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/audio_clips`)\n      ])\n      if( reqChannel.status >= 400 ) {\n        res.statusCode = reqChannel.status\n        return { channel: null, audioClips: null, series: null, statusCode: reqChannel.status }\n      }\n      let dataChannel = await reqChannel.json()\n      let channel = dataChannel.body.channel;\n\n      let dataAudios = await reqAudios.json()\n      let audioClips = dataAudios.body.audio_clips\n\n      let dataSeries = await reqSeries.json()\n      let series = dataSeries.body.channels\n      return { channel, audioClips, series, statusCode: 200 }\n    }\n    catch(e) {\n      return { channel: null, audioClips: null, series: null, statusCode: 503 }\n    }\n }\n  \n openPodcast= (event, podcast)=>{\n  event.preventDefault();\n  this.setState({\n    openPodcast: podcast\n  })\n }\n onClosePodcast = (event) =>{\n  event.preventDefault();\n  this.setState({\n    openPodcast: null\n  })\n }\n  render() {    \n    const  {channel, audioClips, series, statusCode} = this.props\n    const {openPodcast} = this.state;\n    if( statusCode !== 200 ) {\n      return <Error statusCode={ statusCode } />\n    }\n\n    return (\n      <Layout  title={channel.title}>\n        \n        <div className=\"banner\" style={{ backgroundImage: `url(${channel.urls.banner_image.original})` }} />\n       \n        {openPodcast && <div  className=\"modal\">\n           <PodcastsPlayer \n            clip={openPodcast}\n            onClose= {this.onClosePodcast}\n           />\n        </div>}\n      <h1>{ channel.title }</h1>\n\n      { series.length > 0 &&\n        <div>\n          <h2>Series</h2>\n          <div className=\"channels\">\n            { series.map((serie) => (\n              <Link href={`/channel?id=${ serie.id }`} prefetch>\n                <a className=\"channel\">\n                  <img src={ serie.urls.logo_image.original } alt=\"\"/>\n                  <h2>{ serie.title }</h2>\n                </a>\n              </Link>\n            ))}\n          </div>\n        </div>\n      }\n\n      <h2>Ultimos Podcasts</h2>\n      <Podcasts\n        podcasts={audioClips}\n        onClickPodcast={this.openPodcast}\n      />\n        <style jsx>\n        {`\n        .modal{\n          position: fixed;\n          top:0;\n          left:0;\n          right:0;\n          bottom:0;\n          z-index:9999;\n        }\n          .channels {\n            display: grid;\n            grid-gap: 15px;\n            padding: 15px;\n            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));\n          }\n          h1{\n            font-weight:600px;\n            padding:15px;\n          }\n          a.channel {\n            display: block;\n            margin-bottom: 0.5em;\n            color: #333;\n            text-decoration: none;\n          }\n          .channel img {\n            border-radius: 3px;\n            box-shadow: 0px 2px 6px rgba(0,0,0,0.15);\n            width: 100%;\n          }\n          h2 {\n            padding: 5px;\n            font-size: 0.9em;\n            font-weight: 600;\n            margin: 0;\n            text-align: center;\n          }\n        `}\n      </style>\n      </Layout>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}